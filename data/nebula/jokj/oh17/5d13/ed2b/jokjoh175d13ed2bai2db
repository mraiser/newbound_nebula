{"data":{"java":"File root = BotBase.getBot(\"nebula\").getRootDir();\nFile f = new File(root, \"networks\");\nf = new File(f, servicename);\nf.mkdirs();\nif (config != null){\n  File f2 = new File(f, \"config.yml\");\n  if (config.getBoolean(\"use_yaml\")) BotUtil.writeFile(f2, config.getString(\"yaml\").getBytes());\n  else \n  {\n    String shm = \"\";\n    String hosts = \"\";\n    JSONObject lhs = config.getJSONObject(\"lighthouses\");\n    Iterator i = lhs.keys();\n    while (i.hasNext()){\n      String peer = (String)i.next();\n      JSONObject lh = lhs.getJSONObject(peer);\n      shm += \"  \\\"\"+lh.get(\"private_ip\")+\"\\\": [\\\"\"+lh.get(\"public_ip\")+\":\"+lh.get(\"port\")+\"\\\"]\\n\";\n      hosts += \"    - \\\"\"+lh.get(\"private_ip\")+\"\\\"\\n\";\n    }\n\n    String path = f.getCanonicalPath();\n    String s = \"pki:\\n  ca: \"+path+\"/ca.crt\\n  cert: \"+path+\"/host.crt\\n  key: \"+path+\"/host.key\\nstatic_host_map:\\n\"+shm+\"lighthouse:\\n  am_lighthouse: \"+config.getBoolean(\"am_lighthouse\")+\"\\n  interval: 60\\n  hosts:\\n\"+hosts+\"listen:\\n  host: \"+config.getString(\"host\")+\"\\n  port: \"+config.getInt(\"port\")+\"\\npunchy: true\\ntun:\\n  dev: \"+servicename+\"\\n  drop_local_broadcast: false\\n  drop_multicast: false\\n  tx_queue: 500\\n  mtu: 1300\\n  routes:\\n  unsafe_routes:\\nlogging:\\n  level: info\\n  format: text\\nfirewall:\\n  conntrack:\\n    tcp_timeout: 120h\\n    udp_timeout: 3m\\n    default_timeout: 10m\\n    max_connections: 100000\\n  outbound:\\n    - port: any\\n      proto: any\\n      host: any\\n  inbound:\\n    - port: any\\n      proto: icmp\\n      host: any\\n    - port: any\\n      proto: tcp\\n      host: any \\n\";\n    \n    BotUtil.writeFile(f2, s.getBytes());\n    config.put(\"yaml\", s);\n  }\n\n  f2 = new File(f, \"connection.json\");\n  BotUtil.writeFile(f2, config.toString().getBytes());\n}\nreturn config;","import":"import org.json.*;\nimport com.newbound.robot.*;\nimport java.io.*;\nimport java.util.*;\n","returntype":"JSONObject","params":[{"name":"servicename","type":"String"},{"name":"config","type":"JSONObject"}],"desc":""},"id":"jokjoh175d13ed2bai2db","sessionid":"jvgvwg16b7a4d277bt3","time":1606060847532,"addr":"/0:0:0:0:0:0:0:1:54856","username":"admin"}
{"data":{"java":"File root = BotBase.getBot(\"nebula\").getRootDir();\nFile home = new File(root, \"networks\");\nhome = new File(home, servicename);\nFile f = root.getParentFile().getParentFile();\n\nFile ca_key = new File(f, \"ca.key\");\nFile ca_crt = new File(f, \"ca.crt\");\nBotUtil.copyFile(new File(home, \"ca.key\"), ca_key);\nBotUtil.copyFile(new File(home, \"ca.crt\"), ca_crt);\n\nFile bin = new File(root, \"bin\");\nString[] sa = { new File(bin, \"nebula-cert\").getCanonicalPath(), \"sign\", \"-name\", peer, \"-ip\", ipaddress, \"-groups\", groups };\n//String[] sa = { new File(bin, \"nebula-cert\").getCanonicalPath(), \"sign\", \"-name\", peer, \"-ip\", ipaddress };\nsa = BotUtil.systemCall(sa);\nca_key.delete();\nca_crt.delete();\nca_crt = new File(home, \"ca.crt\");\nString s = sa[0]+sa[1];\nif (!s.equals(\"\")) throw new Exception(s);\n\nhome = new File(home, \"members\");\nhome = new File(home, peer);\nhome.mkdirs();\n\nFile host_crt = new File(home, \"host.crt\");\nFile host_key = new File(home, \"host.key\");\nnew File(f, peer+\".crt\").renameTo(host_crt);\nnew File(f, peer+\".key\").renameTo(host_key);\nJSONObject jo = new JSONObject();\njo.put(\"ip_address\", ipaddress);\njo.put(\"groups\", groups);\nBotUtil.writeFile(new File(home, \"info.json\"), jo.toString().getBytes());\n\njo.put(\"ca_crt\", new String(BotUtil.readFile(ca_crt)));\njo.put(\"host_crt\", new String(BotUtil.readFile(host_crt)));\njo.put(\"host_key\", new String(BotUtil.readFile(host_key)));\n\nreturn jo;","import":"import org.json.*;\nimport com.newbound.robot.*;\nimport java.io.*;\n","returntype":"JSONObject","params":[{"name":"servicename","type":"String"},{"name":"peer","type":"String"},{"name":"ipaddress","type":"String"},{"name":"groups","type":"String"}],"desc":""},"id":"zsvkoo175f63a2045y2059","sessionid":"jvgvwg16b7a4d277bt3","time":1606492796597,"addr":"/0:0:0:0:0:0:0:1:58446","username":"admin"}
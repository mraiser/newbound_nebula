{"data":{"java":"File root = BotBase.getBot(\"nebula\").getRootDir();\nFile bin = new File(root, \"bin\");\nString[] sa = { new File(bin, \"nebula-cert\").getCanonicalPath(), \"ca\", \"-name\", name };\nsa = BotUtil.systemCall(sa);\nString s = sa[0]+sa[1];\nif (!s.equals(\"\")) throw new Exception(s);\n\nString ip_address = subnet.replace(\"X\", \"1\");\nsa = new String[]{ new File(bin, \"nebula-cert\").getCanonicalPath(), \"sign\", \"-name\", \"host\", \"-ip\", ip_address };\nsa = BotUtil.systemCall(sa);\ns = sa[0]+sa[1];\nif (!s.equals(\"\")) throw new Exception(s);\n\nFile home = new File(root, \"networks\");\nhome = new File(home, name);\nhome.mkdirs();\n\nFile f = root.getParentFile().getParentFile();\nnew File(f, \"ca.crt\").renameTo(new File(home, \"ca.crt\"));\nnew File(f, \"ca.key\").renameTo(new File(home, \"ca.key\"));\nnew File(f, \"host.crt\").renameTo(new File(home, \"host.crt\"));\nnew File(f, \"host.key\").renameTo(new File(home, \"host.key\"));\n\nJSONObject jo = new JSONObject();\njo.put(\"lighthouses\", new JSONObject());\njo.put(\"port\", port);\njo.put(\"subnet\", subnet);\njo.put(\"ip_address\", ip_address);\njo.put(\"host\", \"0.0.0.0\");\njo.put(\"am_lighthouse\", false);\njo.put(\"use_yaml\", false);\n\nALLPARAMS.put(\"servicename\", name);\nALLPARAMS.put(\"config\", jo);\njo = call(\"nebula\", \"nebula\", \"save_config\", ALLPARAMS);\n\n\nreturn jo;","import":"import org.json.*;\nimport com.newbound.robot.*;\nimport java.io.*;\n","returntype":"JSONObject","params":[{"name":"name","type":"String"},{"name":"subnet","type":"String"},{"name":"port","type":"String"}],"desc":""},"id":"sogqym175ec29b146u1b72","sessionid":"jvgvwg16b7a4d277bt3","time":1606152186474,"addr":"/0:0:0:0:0:0:0:1:41682","username":"admin"}